{"id":8853,"date":"2019-01-17T23:53:44","date_gmt":"2019-01-17T23:53:44","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=8853"},"modified":"2019-07-08T06:07:56","modified_gmt":"2019-07-08T06:07:56","slug":"azure-functions-building-server-less-apps-for-azure-using-visual-studio-code","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2019\/01\/17\/azure-functions-building-server-less-apps-for-azure-using-visual-studio-code\/","title":{"rendered":"Azure Functions: Building server less apps for Azure using Visual Studio Code"},"content":{"rendered":"<p><a href=\"#_Toc500069570\">Introduction<\/a><br \/>\n<a href=\"#_Toc500069571\"> What is Azure Functions?<\/a><br \/>\n<a href=\"#_Toc500069572\"> Demo: Develop using Visual Studio Code<\/a><br \/>\n<a href=\"#_Toc500069573\">Conclusion<\/a><\/p>\n<h2><a name=\"_Toc500069570\"><\/a>Introduction<\/h2>\n<p>In this post we are going to learn what <a href=\"https:\/\/azure.microsoft.com\/en-gb\/services\/functions\/\" target=\"_blank\" rel=\"noopener noreferrer\">Azure functions<\/a> is, how you can build your very first server less function and all the capabilities about develop, publish and monitor using <a href=\"https:\/\/code.visualstudio.com\/\" target=\"_blank\" rel=\"noopener noreferrer\">Visual Studio Code<\/a>. With Azure functions you can easily build the apps you need using simple. Server less functions that scale to meet demand. Use the programming language of your choice, and don\u2019t worry about servers or infrastructure.<\/p>\n<h2><a name=\"_Toc500069571\"><\/a>What is Azure Functions?<\/h2>\n<p>Azure functions is server less compute, which is the ability to run custom code on demand and at scale in the cloud. Whether it is written in C#, Java or even Python. You give your code to Azure and it will manage and run it for you all dynamically based on events. In order to help you to accomplish this, there are various options for integrated development using tools such as<a href=\"https:\/\/visualstudio.microsoft.com\/\" target=\"_blank\" rel=\"noopener noreferrer\"> Visual Studio<\/a>, VS code, <a href=\"https:\/\/maven.apache.org\/\" target=\"_blank\" rel=\"noopener noreferrer\">Maven<\/a>, Eclipse, or even just a cross-platform CLI. In this post, we are going to see one such example for functions using VS code.<\/p>\n<p>&nbsp;<\/p>\n<p class=\"green\"><span class=\"ion-info\">More Info<\/span>If you would like to know more about Azure deployments, have a look at the post <a href=\"https:\/\/mohamedradwan.com\/2018\/02\/12\/how-to-deploy-to-azure-using-team-services-release-management\/\">How to deploy to Azure using Team Services Release Management<\/a>. The post describes how Azure deployments are made easy by using Visual Studio Team Services (VSTS) Release Management. You will see a step-by-step tutorial on how to configure and deploy to Azure in Release Management, and, moreover, how to configure an end-to-end pipeline for deploying applications on Azure.<\/p>\n<p>&nbsp;<\/p>\n<h2><a name=\"_Toc500069572\"><\/a>Demo: Develop using Visual Studio Code<\/h2>\n<p>We are going to see, how anyone can get a function up and running in just a few minutes. In order to accomplish this, I am going to use VS code and the Azure functions extension. The Functions extension enables us to create new functions projects, add new functions to the project. And even publish to Azure directly from within VS code, just with a click of one button (image 1).<\/p>\n<figure id=\"attachment_8854\" aria-describedby=\"caption-attachment-8854\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8854\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-1-Azure-functions.png\" alt=\"Image 1 - Azure functions\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-1-Azure-functions.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-1-Azure-functions-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-1-Azure-functions-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-1-Azure-functions-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8854\" class=\"wp-caption-text\">Image 1 &#8211; Azure functions<\/figcaption><\/figure>\n<p>Now I am going to create our very first function. For the purpose of this demo, I am going to use JavaScript. By choosing a language, we will have initialized functions projects with a couple of files, namely, the local and the hosting configuration. Now, we can go back to the Azure functions extension, and add a new function to this project. In the menu (image 2), are presented a templates that we would like to use to create a function.<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8855\" aria-describedby=\"caption-attachment-8855\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8855\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-2-Templates-to-create-a-function.png\" alt=\"Image 2 - Templates to create a function\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-2-Templates-to-create-a-function.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-2-Templates-to-create-a-function-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-2-Templates-to-create-a-function-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-2-Templates-to-create-a-function-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8855\" class=\"wp-caption-text\">Image 2 &#8211; Templates to create a function<\/figcaption><\/figure>\n<p>&nbsp;<\/p>\n<p class=\"blue\"><span class=\"ion-tip\">Tip<\/span> If you would like to know more about this new developer service available on the <a href=\"https:\/\/azure.microsoft.com\/en-gb\/\">Azure<\/a> platform, you can have a look at the following post; <a href=\"https:\/\/mohamedradwan.com\/2016\/07\/12\/more-about-azure-devtest-labs\/\">More about Azure DevTest Labs<\/a>. If you prefer a more concise description of the same feature, &#8211; <a href=\"https:\/\/mohamedradwan.com\/2016\/06\/29\/quick-overview-of-azure-devtest-labs\/\">have a look at Quick overview of Azure DevTest Labs<\/a>.<\/p>\n<p>&nbsp;<\/p>\n<p>These templates directly correspond to the triggers available to us in order to execute the function. I will pick HTTP trigger provided with a friendly name and secure the HTTP endpoint with a function or an API key. Going back to our directory, we can see that it created a new sub directory with a name we gave for the function, with a node script and function json configuration file (image 3).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8856\" aria-describedby=\"caption-attachment-8856\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8856\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-3-HttpTrigger-sub-directory.png\" alt=\"Image 3 - HttpTrigger sub directory\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-3-HttpTrigger-sub-directory.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-3-HttpTrigger-sub-directory-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-3-HttpTrigger-sub-directory-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-3-HttpTrigger-sub-directory-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8856\" class=\"wp-caption-text\">Image 3 &#8211; HttpTrigger sub directory<\/figcaption><\/figure>\n<p>If we look at the node function, we can see that it consumes an HTTP request input, and parses the content of that input in order to find the name property in the body of the query string. Then, it uses the name property to construct an HTTP response, which is returned back from the function (image 4).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8857\" aria-describedby=\"caption-attachment-8857\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8857\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-4-Index.js.png\" alt=\"Image 4 - Index.js\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-4-Index.js.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-4-Index.js-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-4-Index.js-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-4-Index.js-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8857\" class=\"wp-caption-text\">Image 4 &#8211; Index.js<\/figcaption><\/figure>\n<p>&nbsp;<\/p>\n<p class=\"blue\"><span class=\"ion-tip\">Tip<\/span> If you would like to know more about the best practices for <a href=\"https:\/\/www.visualstudio.com\/team-services\/devops\/\">DevOps<\/a>, Continuous Integration and Continuous Delivery, you can have a look at the following post: <a href=\"https:\/\/mohamedradwan.com\/2017\/12\/29\/develop-vsts-extension-and-configure-ci-continuous-integration-and-cd-continuous-delivery-pipeline\/\">Configure CI (Continuous Integration) and CD (Continuous Delivery Pipeline)<\/a>.<\/p>\n<p>&nbsp;<\/p>\n<p>The JSON configuration describes the HTTP request input and the response output binding (image 5).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8858\" aria-describedby=\"caption-attachment-8858\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8858\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-5-Function.json_.png\" alt=\"Image 5 - Function.json\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-5-Function.json_.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-5-Function.json_-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-5-Function.json_-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-5-Function.json_-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8858\" class=\"wp-caption-text\">Image 5 &#8211; Function.json<\/figcaption><\/figure>\n<p>Now we have our function and we can publish to Azure or we can use the open source functions runtime to debug and test locally. VS code enables you to do all of this simply by clicking f5, but if you have node extension installed you can even go ahead and set breakpoints in your code in order to debug.<br \/>\nNow I am going to show another example of a node function that triggers off a message or an event received on an IOT hub, then grabs the content of the message and outputs it to the console (image 6).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8859\" aria-describedby=\"caption-attachment-8859\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8859\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-6-Function-that-triggers-off-a-message.png\" alt=\"Image 6 - Function that triggers off a message\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-6-Function-that-triggers-off-a-message.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-6-Function-that-triggers-off-a-message-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-6-Function-that-triggers-off-a-message-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-6-Function-that-triggers-off-a-message-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8859\" class=\"wp-caption-text\">Image 6 &#8211; Function that triggers off a message<\/figcaption><\/figure>\n<p>Now let us look at how to publish the app. We can go ahead, pick a subscription, and create a new app with a unique name. After we give it a unique name. Then we can pick a resource group for this function app as well as a storage account to contain the content of the app and the files. After a while. We will have our function app provisioned and we have one more step to configure any settings for the function app. For a function to connect to IOT hub. We need to configure the IOT hub connection string (image 7). in order to provision it as an app setting on the function app.<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8860\" aria-describedby=\"caption-attachment-8860\" style=\"width: 1366px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8860\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-7-IOT-hub-connection-string.png\" alt=\"Image 7 - IOT hub connection string\" width=\"1366\" height=\"768\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-7-IOT-hub-connection-string.png 1366w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-7-IOT-hub-connection-string-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-7-IOT-hub-connection-string-768x432.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-7-IOT-hub-connection-string-1024x576.png 1024w\" sizes=\"(max-width: 1366px) 100vw, 1366px\" \/><figcaption id=\"caption-attachment-8860\" class=\"wp-caption-text\">Image 7 &#8211; IOT hub connection string<\/figcaption><\/figure>\n<p>After that, we can go ahead and test our application running on Azure. I will connect to the streaming logs for our function app. After that, we can start seeing the app inside logging. In order to simulate these events on the IOT hub. I got an app that will register multiple devices and start sending notifications to the IOT hub. Shortly, we should notice that our function started to pick these up and output those events or messages back to the console (image 8).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8861\" aria-describedby=\"caption-attachment-8861\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8861\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-8-Console.png\" alt=\"Image 8 - Console\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-8-Console.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-8-Console-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-8-Console-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/01\/Image-8-Console-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8861\" class=\"wp-caption-text\">Image 8 &#8211; Console<\/figcaption><\/figure>\n<p>We developed an end-to-end service application, tested locally, published to Azure, and even looked at the monitoring logs. All of that from the local instance of VS code.<\/p>\n<h2><a name=\"_Toc500069573\"><\/a>Conclusion<\/h2>\n<p>With Azure functions. Microsoft strive to keep improving developer experiences and provide support for the languages and tools that the developers are most familiar with. In order to be more productive. With Azure functions you can do Web application backends. Mobile application backends, Real-time file processing, Real-time stream processing. Automation of scheduled tasks, Extending SaaS applications and many more.<\/p>\n<p>&nbsp;<\/p>\n<p class=\"gray\"><span class=\"ion-video\">Video<\/span> You can see <strong><a href=\"https:\/\/www.youtube.com\/watch?v=uGAcWLnSU0A\">this video<\/a><\/strong>, if you would like to find more information about how to get started with Release Management and its advantages. See how to create a build definition using CI\/CD Tools for VSTS Extensions. (I will be using Package Extension and Publish Artifact tasks). And also using DevOps-VSTS-POC trigger in order to enable CI, all of that in order to be able to publish. Share, install and query versions. You will see how to create release definition, choose an artifact and configure source for the artifact and default version. See how to create different environments or clone the existing one. in my case I am going to create QA. Preproduction and Production environment. Each with one phrase and one task. See also how to configure Publish Extension task for each environment! See an end-to-end continuous delivery pipeline using VSTS extension with Build and Release Management.<\/p>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Introduction What is Azure Functions? Demo: Develop using Visual Studio &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2019\/01\/17\/azure-functions-building-server-less-apps-for-azure-using-visual-studio-code\/\"> <span class=\"screen-reader-text\">Azure Functions: Building server less apps for Azure using Visual Studio Code<\/span> Read More<\/a><\/p>\n","protected":false},"author":1,"featured_media":8930,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[836],"tags":[99,946],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/8853"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=8853"}],"version-history":[{"count":5,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/8853\/revisions"}],"predecessor-version":[{"id":9410,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/8853\/revisions\/9410"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media\/8930"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=8853"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=8853"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=8853"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}