{"id":4232,"date":"2013-12-29T23:37:03","date_gmt":"2013-12-29T23:37:03","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=4232"},"modified":"2016-04-25T07:57:27","modified_gmt":"2016-04-25T07:57:27","slug":"force-synchronizing-tfs-2013-users-with-windows-accounts","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/","title":{"rendered":"Force Synchronizing TFS 2013 Users with Windows Accounts"},"content":{"rendered":"<p>Sometimes we need to add users to our AD or Windows so we can add them to the TFS and we need them to appear immediately without needing to wait for the synchronization to happen automatically.<\/p>\n<p>There are many ways that we can do that&#8230;.I will explain how to do that with different methods.<\/p>\n<p><strong>TFS Job Agent<\/strong> is responsible for running this sync and other jobs, by default this run once an hour, we can run this job using the Web Service &#8220;<strong>JobWebService<\/strong>&#8221; or by using TFS Client Object Model &#8220;<strong>Microsoft.TeamFoundation.Client<\/strong>&#8220;.<\/p>\n<p>We can use the Client Object Model with <strong>C#<\/strong> <strong>Console Application<\/strong> for example or using it with <strong>PowerShell<\/strong> script.<\/p>\n<p><span style=\"color: #339966;\">Use the <strong>JobWebService<\/strong>\u00a0directly.<\/span><\/p>\n<p>We need to call <strong>QueueJobs<\/strong> web service but unfortunately we can&#8217;t call that from the browser, remember that we need also the <strong>GUID<\/strong> of the job<\/p>\n<p>Navigate to the TFS admin Web Services.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/open-webservice\/#main\" rel=\"attachment wp-att-4235\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4235\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/open-webservice.jpg?w=660\" alt=\"Open Webservice\" width=\"660\" height=\"492\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/open-webservice.jpg 802w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/open-webservice-300x224.jpg 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/open-webservice-768x573.jpg 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n<p>Open the <strong>JobService<\/strong> Web Services and click on <strong>QueueJobs<\/strong> Web Service.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/queuejobs-webservice\/#main\" rel=\"attachment wp-att-4236\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-4236\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-webservice.jpg\" alt=\"QueueJobs WebService\" width=\"659\" height=\"409\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-webservice.jpg 659w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-webservice-300x186.jpg 300w\" sizes=\"(max-width: 659px) 100vw, 659px\" \/><\/a><\/p>\n<p>We can&#8217;t call it from the browser and we need the <strong>GUID<\/strong> of the Job.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/call-queuejobs\/#main\" rel=\"attachment wp-att-4234\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4234\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/call-queuejobs.jpg?w=660\" alt=\"Call QueueJobs\" width=\"660\" height=\"460\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/call-queuejobs.jpg 893w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/call-queuejobs-300x209.jpg 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/call-queuejobs-768x536.jpg 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n<p><span style=\"color: #339966;\">Use the <strong>WebServiceStudio<\/strong>.<\/span><\/p>\n<p>We can use a very smart tool <a title=\"WebServiceStudio \" href=\"http:\/\/webservicestudio.codeplex.com\/\" target=\"_blank\">WebServiceStudio <\/a>that existing on <strong>CodePlex<\/strong>, this tool enables us to call the Web Service with GUI and without writing code for the Web Service.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/queuejobs-using-webservicestudio\/#main\" rel=\"attachment wp-att-4255\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4255\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-using-webservicestudio1.jpg?w=660\" alt=\"QueueJobs using WebServiceStudio\" width=\"660\" height=\"452\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-using-webservicestudio1.jpg 780w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-using-webservicestudio1-300x206.jpg 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/queuejobs-using-webservicestudio1-768x527.jpg 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n<p><span style=\"color: #339966;\">Use a\u00a0<strong>PowerShell<\/strong>\u00a0Script.<\/span><\/p>\n<p>We also can\u00a0use TFS Client Object Model &#8220;<strong>Microsoft.TeamFoundation.Client<\/strong>&#8221; with <strong>PowerShell<\/strong> script.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/powershell\/#main\" rel=\"attachment wp-att-4240\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4240\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/powershell.jpg?w=660\" alt=\"PowerShell\" width=\"660\" height=\"412\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/powershell.jpg 1015w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/powershell-300x187.jpg 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/powershell-768x480.jpg 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><br \/>\n<\/a><a style=\"line-height: 1.5em;\" title=\"Download\" href=\"https:\/\/skydrive.live.com\/redir?resid=4BCAA16D27B46600%212763\" target=\"_blank\">Download the script<\/a><\/p>\n<p><span style=\"line-height: 1.5em;\">I made the demo on <\/span><a style=\"line-height: 1.5em;\" href=\"http:\/\/blogs.msdn.com\/b\/briankel\/archive\/2013\/11\/26\/rtm-version-of-visual-studio-2013-alm-virtual-machine.aspx\" target=\"_blank\">Brain Keller VM<\/a><span style=\"line-height: 1.5em;\">, here are the steps you need to follow:<\/span><\/p>\n<p>Add your user to your AD or Local accounts for work group.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/add-users-to-windows\/#main\" rel=\"attachment wp-att-4242\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-4242\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/add-users-to-windows.jpg\" alt=\"Add Users to Windows\" width=\"656\" height=\"377\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/add-users-to-windows.jpg 656w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/add-users-to-windows-300x172.jpg 300w\" sizes=\"(max-width: 656px) 100vw, 656px\" \/><\/a><\/p>\n<p><span style=\"line-height: 1.5em;\">Remember that We adding the <\/span><strong style=\"line-height: 1.5em;\">Windows Group<\/strong><span style=\"line-height: 1.5em;\"> to the <\/span><strong style=\"line-height: 1.5em;\">TFS Collection<\/strong><span style=\"line-height: 1.5em;\">, in our case the <\/span><strong style=\"line-height: 1.5em;\">Administrators<\/strong><span style=\"line-height: 1.5em;\"> group.<\/span><a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/administrators-added-to-the-project-collection\/#main\" rel=\"attachment wp-att-4243\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-4243\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/administrators-added-to-the-project-collection.jpg\" alt=\"Administrators added to the project collection\" width=\"498\" height=\"439\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/administrators-added-to-the-project-collection.jpg 498w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/administrators-added-to-the-project-collection-300x264.jpg 300w\" sizes=\"(max-width: 498px) 100vw, 498px\" \/><\/a><\/p>\n<p>We will run the job using any method and then the users will start to appear immediately.<a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/the-user-will-appear-in-tfs\/#main\" rel=\"attachment wp-att-4244\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4244\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/the-user-will-appear-in-tfs.jpg?w=660\" alt=\"The user will appear in TFS\" width=\"660\" height=\"406\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/the-user-will-appear-in-tfs.jpg 805w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/the-user-will-appear-in-tfs-300x185.jpg 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/12\/the-user-will-appear-in-tfs-768x473.jpg 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n<p>To view what is the status of the job, queue time, start time or end time, run the following SQL script on DT (Data Tire) don&#8217;t confuse with the time because it&#8217;s <strong>UTC<\/strong><\/p>\n<p>[code language=&#8221;sql&#8221;]<br \/>\nUSe tfs_Configuration<br \/>\nSELECT TOP 100 *<br \/>\nFROM [Tfs_Configuration].[dbo].[tbl_JobHistory]<br \/>\nWHERE JobId=&#8217;544DD581-F72A-45A9-8DE0-8CD3A5F29DFE&#8217;<br \/>\n[\/code]<\/p>\n<p><a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/tbl_jobhistory\/#main\" rel=\"attachment wp-att-4432\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4432\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobhistory.png?w=660\" alt=\"tbl_JobHistory\" width=\"660\" height=\"250\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobhistory.png 934w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobhistory-300x114.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobhistory-768x291.png 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><br \/>\nTo make sure about job name and other info, run the following script:<\/p>\n<p>[code language=&#8221;sql&#8221;]<br \/>\nuse tfs_Configuration<br \/>\nSELECT TOP 100 *<br \/>\nFROM [Tfs_Configuration].[dbo].[tbl_JobDefinition]<br \/>\nWHERE JobId=&#8217;544DD581-F72A-45A9-8DE0-8CD3A5F29DFE&#8217;<br \/>\n[\/code]<\/p>\n<p><a href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/tbl_jobdefinition\/#main\" rel=\"attachment wp-att-4433\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4433\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobdefinition.png?w=660\" alt=\"tbl_JobDefinition\" width=\"660\" height=\"130\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobdefinition.png 959w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobdefinition-300x59.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/tbl_jobdefinition-768x151.png 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Sometimes we need to add users to our AD or &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/\"> <span class=\"screen-reader-text\">Force Synchronizing TFS 2013 Users with Windows Accounts<\/span> Read More<\/a><\/p>\n","protected":false},"author":1,"featured_media":5553,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[17,38,43],"tags":[],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/4232"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=4232"}],"version-history":[{"count":1,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/4232\/revisions"}],"predecessor-version":[{"id":5554,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/4232\/revisions\/5554"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media\/5553"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=4232"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=4232"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=4232"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}