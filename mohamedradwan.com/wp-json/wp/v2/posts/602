{"id":602,"date":"2010-10-27T22:32:16","date_gmt":"2010-10-27T22:32:16","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=359"},"modified":"2017-08-30T13:46:02","modified_gmt":"2017-08-30T13:46:02","slug":"code-coverage-with-team-build-and-mvc-or-any-web-application","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2010\/10\/27\/code-coverage-with-team-build-and-mvc-or-any-web-application\/","title":{"rendered":"Code coverage with Team build and MVC or any web application"},"content":{"rendered":"<hr \/>\n<ul>\n<li>I just need to create a code coverage and display it with the team build but I face a problem when I follow the normal steps, so my question was why the code coverage doesn&#8217;t appear with the team build? but there is no answer after little investigation here the result.<\/li>\n<li>Fist the visual studio premium or Ultimate edition must be installed on the building machine so code coverage can viewed and calculated.<\/li>\n<\/ul>\n<p>The MVC or the website needs additional test configuration and may normal configuration cause an error because I face the following error<\/p>\n<p>Test Run Error. Cannot initialize the ASP.NET project &#8216;WebUIController&#8217;.<br \/>\nException was thrown: The web site could not be configured correctly; getting ASP.NET process information failed. Requesting &#8216;http:\/\/localhost:3352\/VSEnterpriseHelper.axd&#8217; returned an error: The remote server returned an error: (500) Internal Server Error.<\/p>\n<p>You can check here a bug that closed because it can&#8217;t reproduced on Microsoft for this error<\/p>\n<p><a title=\"The bug\" href=\"https:\/\/connect.microsoft.com\/VisualStudio\/feedback\/details\/531946\/test-run-and-team-build-fails-although-all-test-passed?wa=wsignin1.0\" target=\"_blank\"> Microsoft <\/a><a title=\"The bug\" href=\"https:\/\/connect.microsoft.com\/VisualStudio\/feedback\/details\/531946\/test-run-and-team-build-fails-although-all-test-passed?wa=wsignin1.0\" target=\"_blank\">Connect, click to see the bug<\/a><\/p>\n<ul>\n<li>So I read many articles but the most important one as the following,\u00a0 it&#8217;s very good but it&#8217;s not cover all my cases<\/li>\n<\/ul>\n<p><a title=\"A good article\" href=\"http:\/\/blogs.blackmarble.co.uk\/blogs\/rfennell\/archive\/2009\/04\/15\/team-build-code-coverage-and-mvc.aspx\" target=\"_blank\">http:\/\/blogs.blackmarble.co.uk\/blogs\/rfennell\/archive\/2009\/04\/15\/team-build-code-coverage-and-mvc.aspx<\/a><\/p>\n<p>So let&#8217;s start<\/p>\n<ul>\n<li>First you will see that you have 2 test configuration files by default (you can add more config file\u00a0 if you want) when you create new test project in any solution so you can use one of them as a local configuration and the other with the team build if you want,\u00a0 so every configuration has different values, remember the way that selecting the testing configuration is different, it depends on\u00a0 the place you will build your solution on,\u00a0 for example if you build your solution on your machine then you will select the desire test configuration from Visual\u00a0 Studio menu Test&#8211;&gt;Select Active test<\/li>\n<\/ul>\n<ul>\n<li>But if you build your solution on building machine using Team build so you will select this configuration from the build definition parameters window, when you create or edit build definition<\/li>\n<\/ul>\n<figure id=\"attachment_7223\" aria-describedby=\"caption-attachment-7223\" style=\"width: 318px\" class=\"wp-caption alignnone\"><a href=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-files.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-7223\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-files.jpg\" alt=\"Test Configuration in the solution\" width=\"318\" height=\"377\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-files.jpg 318w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-files-253x300.png 253w\" sizes=\"(max-width: 318px) 100vw, 318px\" \/><\/a><figcaption id=\"caption-attachment-7223\" class=\"wp-caption-text\">Test Configuration in the solution<\/figcaption><\/figure>\n<ul>\n<li>Open the test configuration you want let&#8217;s say its TraceAndTestImpact.testsettings, just double click on it and select code coverage and select the dll you want but remember don&#8217;t select the web, you will configure it manually, and here is the tricky sometimes it&#8217;s OK and sometimes it give me the previous error in the Microsoft connect, any way don&#8217;t select it, save the file and close it.<\/li>\n<\/ul>\n<figure id=\"attachment_7222\" aria-describedby=\"caption-attachment-7222\" style=\"width: 760px\" class=\"wp-caption alignnone\"><a href=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Set-code-coverage.png\"><img loading=\"lazy\" decoding=\"async\" class=\"size-large wp-image-7222\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Set-code-coverage-1024x467.png\" alt=\"Select code coverage\" width=\"760\" height=\"347\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Set-code-coverage-1024x467.png 1024w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Set-code-coverage-300x137.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Set-code-coverage-768x350.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Set-code-coverage.png 1338w\" sizes=\"(max-width: 760px) 100vw, 760px\" \/><\/a><figcaption id=\"caption-attachment-7222\" class=\"wp-caption-text\">Select code coverage<\/figcaption><\/figure>\n<ul>\n<li>Open the file again but this time with open with as XML and start adding new line to point to the Web dll as the class library but remember you have to set the absolute path because it&#8217;s different on the source folder in the build machine,so you just need to go there and find where the path to the dll on the server machine and put there.<\/li>\n<\/ul>\n<figure id=\"attachment_7224\" aria-describedby=\"caption-attachment-7224\" style=\"width: 760px\" class=\"wp-caption alignnone\"><a href=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-with-XML-viewer.png\"><img loading=\"lazy\" decoding=\"async\" class=\"size-large wp-image-7224\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-with-XML-viewer-1024x332.png\" alt=\"Test Configuration in XMl\" width=\"760\" height=\"246\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-with-XML-viewer-1024x332.png 1024w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-with-XML-viewer-300x97.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-with-XML-viewer-768x249.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2017\/08\/Test-configuration-with-XML-viewer.png 1275w\" sizes=\"(max-width: 760px) 100vw, 760px\" \/><\/a><figcaption id=\"caption-attachment-7224\" class=\"wp-caption-text\">Test Configuration in XMl<\/figcaption><\/figure>\n<ul>\n<li>Build your application on the build machine,\u00a0 now you should see the code coverage for the class libraries and the MVC or the Web Application.<\/li>\n<\/ul>\n","protected":false},"excerpt":{"rendered":"<p>I just need to create a code coverage and display &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2010\/10\/27\/code-coverage-with-team-build-and-mvc-or-any-web-application\/\"> <span class=\"screen-reader-text\">Code coverage with Team build and MVC or any web application<\/span> Read More<\/a><\/p>\n","protected":false},"author":2,"featured_media":7223,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[16,28,31],"tags":[],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/602"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=602"}],"version-history":[{"count":2,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/602\/revisions"}],"predecessor-version":[{"id":7226,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/602\/revisions\/7226"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media\/7223"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=602"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=602"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=602"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}