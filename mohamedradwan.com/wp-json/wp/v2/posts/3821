{"id":3821,"date":"2013-01-16T01:39:27","date_gmt":"2013-01-16T01:39:27","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=3821"},"modified":"2016-05-24T06:10:06","modified_gmt":"2016-05-24T06:10:06","slug":"configuring-multiple-tfs-build-controller-on-the-same-machine","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/","title":{"rendered":"Configuring Multiple TFS Build Controller on the Same Machine"},"content":{"rendered":"<p>In the previous post (<a title=\"Understanding Build Controller and Build Agent\" href=\"https:\/\/mohamedradwan.com\/2013\/01\/15\/understanding-build-controller-and-build-agent-for-tfs-team-foundation-server\/\" target=\"_blank\">Understanding Build Controller and Build Agent<\/a>) I explain that we can&#8217;t install\u00a0multiple\u00a0<strong>Build Controller<\/strong> on the same machine but there is a workaround or hack that we can use and this is not supported by Microsoft and not recommended for production environment, it will be for demo machines only.<\/p>\n<p>The following is step-by-step video for the post.<\/p>\n<p>[youtube=http:\/\/youtu.be\/tGyYvdxoJKU]<\/p>\n<p>&nbsp;<\/p>\n<p>Open the command line as Administrator and create windows service and\u00a0associate\u00a0it with <strong>TFSBuildServiceHost.exe<\/strong>., make sure to leave space before &#8220;=&#8221; and you should see success. \u00a0<span style=\"color:#0000ff;\"><em>sc create Radwan-Service binPath= &#8220;C:Program FilesMicrosoft Team Foundation Server 11.0ToolsTfsBuildServiceHost.exe \/NamedInstance:Radwan-Service&#8221; DisplayName= &#8220;Radwan-DisplayName&#8221;<\/em><\/span><\/p>\n<p><a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/1-create-service-command-line\/#main\" rel=\"attachment wp-att-3822\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3822\" alt=\"1-Create-Service-Command-Line\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/1-create-service-command-line-1.jpg?w=660\" width=\"660\" height=\"329\" \/><\/a><\/p>\n<p>Open the services to review the created service.<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/2-review-the-service-after-created\/#main\" rel=\"attachment wp-att-3823\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3823\" alt=\"2-Review-the-service-after-created\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/2-review-the-service-after-created-1.jpg?w=660\" width=\"660\" height=\"323\" \/><\/a><\/p>\n<p>Set the Environment Variable for TFS Build Service.\u00a0<span style=\"color:#0000ff;\"><em>set TFSBUILDSERVICEHOST.2012=Radwan-Service<\/em><\/span><a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/3-set-env-variable\/#main\" rel=\"attachment wp-att-3824\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3824\" alt=\"3-Set-env-variable\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/3-set-env-variable-1.jpg?w=660\" width=\"660\" height=\"332\" \/><\/a><\/p>\n<p>Launch <strong>TfsMgmt.exe<\/strong> to configure the created build service and click on <strong>Register<\/strong>, noticed that it shows that build not configured and \u00a0this for the created service but if we open the <strong>TFS Administration\u00a0Console<\/strong> and navigate to <strong>Build Configuration<\/strong> we will find the old service configured.\u00a0<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/4-run-tfsmgmt\/#main\" rel=\"attachment wp-att-3825\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3825\" alt=\"4-Run-tfsmgmt\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/4-run-tfsmgmt-1.jpg?w=660\" width=\"660\" height=\"331\" \/><\/a>\u00a0<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/5-build-config-for-created-service\/#main\" rel=\"attachment wp-att-3826\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3826\" alt=\"5-Build-Config-for-created-service\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/5-build-config-for-created-service-1.jpg?w=660\" width=\"660\" height=\"436\" \/><\/a><\/p>\n<p>Change the port to be different from the running service now, let it be <strong>9195<\/strong>.\u00a0<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/6-register-build-service\/#main\" rel=\"attachment wp-att-3827\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3827\" alt=\"6-Register-Build-Service\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/6-register-build-service-1.jpg?w=660\" width=\"660\" height=\"436\" \/><\/a><\/p>\n<p>Create a new <strong>Build Controller<\/strong> for that service.\u00a0<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/7-create-new-build-controller\/#main\" rel=\"attachment wp-att-3828\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3828\" alt=\"7-create-new-build-controller\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/7-create-new-build-controller-1.jpg?w=660\" width=\"660\" height=\"436\" \/><\/a><\/p>\n<p>Create a new <strong>Build Agent<\/strong> for the created <strong>Build Controller<\/strong>.\u00a0<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/8-create-new-build-agent\/#main\" rel=\"attachment wp-att-3829\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3829\" alt=\"8-create-new-build-agent\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/8-create-new-build-agent-1.jpg?w=660\" width=\"660\" height=\"436\" \/><\/a><\/p>\n<p>Review the new service with it&#8217;s <strong>Build Controller<\/strong> and <strong>Build Agent<\/strong>.<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/9-new-build-service-with-build-controller-and-build-agent\/#main\" rel=\"attachment wp-att-3830\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3830\" alt=\"9-new-build-service-with-build-controller-and-build-agent\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/9-new-build-service-with-build-controller-and-build-agent-1.jpg?w=660\" width=\"660\" height=\"436\" \/><\/a><\/p>\n<p>Review the old service with it&#8217;s <strong>Build Controller<\/strong> and <strong>Build Agent<\/strong>.<a href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/10-old-build-service-with-build-controller-and-build-agent\/#main\" rel=\"attachment wp-att-3831\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-3831\" alt=\"10-old-build-service-with-build-controller-and-build-agent\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2013\/01\/10-old-build-service-with-build-controller-and-build-agent-1.jpg?w=660\" width=\"660\" height=\"435\" \/><\/a><\/p>\n<p>Links:<\/p>\n<p><a title=\"Configuring Multiple TFS Build Services on one Machine\" href=\"http:\/\/blogs.msdn.com\/b\/jimlamb\/archive\/2010\/04\/13\/configuring-multiple-tfs-build-services-on-one-machine.aspx\" target=\"_blank\">Configuring Multiple TFS Build Services on one Machine<\/a><\/p>\n<p><a title=\"Scale out Your Build System\" href=\"http:\/\/msdn.microsoft.com\/library\/dd793166.aspx\" target=\"_blank\">Scale out Your Build System<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>In the previous post (Understanding Build Controller and Build Agent) &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2013\/01\/16\/configuring-multiple-tfs-build-controller-on-the-same-machine\/\"> <span class=\"screen-reader-text\">Configuring Multiple TFS Build Controller on the Same Machine<\/span> Read More<\/a><\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[16,17,28,42],"tags":[],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/3821"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=3821"}],"version-history":[{"count":3,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/3821\/revisions"}],"predecessor-version":[{"id":6000,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/3821\/revisions\/6000"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=3821"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=3821"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=3821"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}