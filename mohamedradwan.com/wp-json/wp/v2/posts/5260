{"id":5260,"date":"2016-02-21T16:51:15","date_gmt":"2016-02-21T16:51:15","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=5260"},"modified":"2019-07-16T09:52:57","modified_gmt":"2019-07-16T09:52:57","slug":"how-long-it-will-take-to-upgrade-to-tfs2015-with-update1","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2016\/02\/21\/how-long-it-will-take-to-upgrade-to-tfs2015-with-update1\/","title":{"rendered":"How Long It Will Take to Upgrade to TFS2015 with Update 1"},"content":{"rendered":"<p><a href=\"#Intro\">Introduction<\/a><\/p>\n<p><a href=\"#Requirements\">TFS Requirements and Compatibility<\/a><\/p>\n<p><a href=\"#Collection\">Collection Size based on actual data not attachment<\/a><\/p>\n<p><a href=\"#Tool\">TFS -Pre-Upgrade Tool<\/a><\/p>\n<p><a href=\"#TFS2013\">TFS- 2013.4 to 2015.1<\/a><\/p>\n<p><a href=\"#TFS2012\">TFS 2012.4 to 2015.1<\/a><\/p>\n<hr \/>\n<p id=\"Intro\">In this post, I&#8217;ll be addressing the question of how long it will take upgrade older <a href=\"https:\/\/www.visualstudio.com\/en-us\/products\/tfs-overview-vs.aspx\" target=\"_blank\" rel=\"noopener noreferrer\">Team Foundation Server<\/a> versions to <a href=\"https:\/\/www.visualstudio.com\/en-us\/news\/tfs2015-update1-vs.aspx\" target=\"_blank\" rel=\"noopener noreferrer\">TFS 2015 Update 1<\/a>. The information on the factors that affect the <strong>upgrade times.\u00a0<\/strong> For TFS 2013 Update 4 and TFS 2012 Update 4 will be presented. As well as a couple of scenarios of upgrade times. For major project changes, you can also read on how to <a href=\"https:\/\/mohamedradwan.com\/2014\/06\/08\/upgrade-tfs-2008-to-tfs-2013-update-2-step-by-step\/\" target=\"_blank\" rel=\"noopener noreferrer\">Upgrade TFS 2008 to TFS 2013 Update 2<\/a> or how to <a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/\" target=\"_blank\" rel=\"noopener noreferrer\">Migrate a TFS Server to another Domain<\/a>.<\/p>\n<h3 id=\"Requirements\">TFS requirements and compatibility<\/h3>\n<p>People have asked me many questions about requirements and compatibility. Such as &#8220;Can we work with old build agent or controller?&#8221; and &#8220;Can we use VS 2008?&#8221;, for example. <a href=\"https:\/\/msdn.microsoft.com\/en-us\/library\/vs\/alm\/tfs\/administer\/requirements\" target=\"_blank\" rel=\"noopener noreferrer\">TFS requirements and compatibility<\/a> as well as <a href=\"https:\/\/www.visualstudio.com\/en-us\/downloads\/visual-studio-2015-system-requirements-vs.aspx#10\" target=\"_blank\" rel=\"noopener noreferrer\">System Requirements<\/a> have been documented by <strong>Microsoft<\/strong>, and I encourage you to review the links for the answers to these kinds of questions.<\/p>\n<h3 id=\"Collection\">Collection Size based on actual data not attachment.<\/h3>\n<p>The time required to upgrade <strong>TFS<\/strong> depends on many things. But the prominent factors are the <strong>version<\/strong> that you&#8217;re upgrading from and the <strong>collection size<\/strong>. The size of some work item attachments will not take too much time, but the collection size that really maters for builds includes work item numbers and <a href=\"https:\/\/msdn.microsoft.com\/en-us\/library\/ms181279(v=vs.90).aspx\" target=\"_blank\" rel=\"noopener noreferrer\">version control file <\/a>and history; this is the main content that takes time to upgrade. If we look at the <a href=\"https:\/\/www.visualstudio.com\/en-us\/news\/tfs2015-vs.aspx\" target=\"_blank\" rel=\"noopener noreferrer\">changes <\/a>from TFS 2013 to TFS 2015, we will find there are\u00a0<a href=\"https:\/\/www.visualstudio.com\/en-us\/news\/tfs2015-vs.aspx#schema\" target=\"_blank\" rel=\"noopener noreferrer\">huge changes in the DB schema<\/a> &#8211; this was done to support the renaming\u00a0for team projects. Also, as long as the collection DB size increases with project content, it will take more time.<\/p>\n<p>For more details on <strong>versioning assembly<\/strong> with TFS, you can read <a href=\"https:\/\/mohamedradwan.com\/2015\/01\/27\/versioning-assembly-during-tfs-build-2013\/\" target=\"_blank\" rel=\"noopener noreferrer\">this article<\/a>.<\/p>\n<p>&nbsp;<\/p>\n<p class=\"blue\"><span class=\"ion-tip\">Tip<\/span> In one of the posts <a href=\"https:\/\/mohamedradwan.com\/2017\/07\/16\/tfs-2015-agile-project-management\/\">TFS 2015 Agile Project Management<\/a> you can read more about new <a href=\"https:\/\/docs.microsoft.com\/en-us\/vsts\/work\/backlogs\/overview\"><strong>Agile Project Management<\/strong><\/a> features in <strong>TFS 2015, <\/strong>which provide better support for aligning across teams, while giving autonomy to individual teams; you can use the same structure with VSTS\/TFS2018.<\/p>\n<p>&nbsp;<\/p>\n<h3 id=\"Tool\">TFS Pre-Upgrade Tool<\/h3>\n<p>Tools such as <a href=\"https:\/\/www.visualstudio.com\/docs\/setup-admin\/upgrade-tfs\/pre-upgrade\" target=\"_blank\" rel=\"noopener noreferrer\">TfsPreUpgrade<\/a> can also be used to help reduce the upgrade time, but this only works for <strong>TFS deployments<\/strong> meeting certain requirements. For the TfsPreUpgrade tool to be applicable, the <strong>deployment<\/strong> needs to be on TFS2013 Update 4 or Update 5 and have its associated collection databases on an <a href=\"https:\/\/www.microsoft.com\/en-us\/cloud-platform\/sql-server-editions-enterprise\" target=\"_blank\" rel=\"noopener noreferrer\">Enterprise edition of SQL Server <\/a>or on <a href=\"https:\/\/msdn.microsoft.com\/en-us\/library\/bb500435(v=sql.110).aspx\" target=\"_blank\" rel=\"noopener noreferrer\">SQL Server 2012<\/a> SP1+ or <a href=\"https:\/\/msdn.microsoft.com\/library\/bb500435(v=sql.120).aspx\" target=\"_blank\" rel=\"noopener noreferrer\">SQL Server 2014<\/a> CU3+.<\/p>\n<p>&nbsp;<\/p>\n<p class=\"gray\"><span class=\"ion-video\">Video<\/span>You can see <strong><a href=\"https:\/\/www.youtube.com\/watch?v=_DdipfiLZ0I \">this video<\/a><\/strong>, if you would like to find more information about how to verify SharePoint using the Upgrade and Migration section of SharePoint administration console, how to check whether all databases point to the new database tier, how to check the Default Collection site.<\/p>\n<p>&nbsp;<\/p>\n<h3 id=\"TFS2013\">TFS2013.4 to TFS2015.1<\/h3>\n<p>The following is example for upgrading to TFS 2015 with Update 1 from <a href=\"https:\/\/support.microsoft.com\/en-us\/kb\/2994375\" target=\"_blank\" rel=\"noopener noreferrer\">TFS 2013 with Update 4<\/a>; the collection size was 360GB and the log file was\u00a040GB. It took just under 11 hours to complete.<\/p>\n<p><a href=\"https:\/\/mohamedradwan.com\/2016\/02\/21\/how-long-it-will-take-to-upgrade-to-tfs2015-with-update1\/tfs2015-update1\/#main\" rel=\"attachment wp-att-5261\"><br \/>\n<\/a><a href=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2015-update1.png\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-5261\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2015-update1.png\" alt=\"TFS2015 update1\" width=\"660\" height=\"452\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2015-update1.png 918w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2015-update1-300x206.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2015-update1-768x526.png 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p class=\"green\"><span class=\"ion-info\">More Info<\/span>If you would like to learn more about different tools and ways for Team Foundation Server to Visual Studio Team Services migration, &#8211; have a look at the <a href=\"https:\/\/mohamedradwan.com\/2018\/03\/11\/published-a-quick-guide-about-real-stories-for-migrating-team-foundation-server-to-visual-studio-team-services\/\">quick guide about real stories for migrating Team Foundation Server to Visual Studio Team Services<\/a>. The guide describes some of the real migration scenarios and explains how to use different tools for several cases.<\/p>\n<p>&nbsp;<\/p>\n<h3 id=\"TFS2012\">TFS2012.4 to TFS2015.1<\/h3>\n<p>The following is example for upgrading to TFS 2015 with Update 1 from <a href=\"https:\/\/support.microsoft.com\/en-us\/kb\/2872520\" target=\"_blank\" rel=\"noopener noreferrer\">TFS 2012 with Update 4<\/a>; the collection size was 40GB and the log file was 5GB. It took just over 14 minutes to complete.<\/p>\n<p><a href=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2012-to-tfs2015.jpg\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-5364\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2012-to-tfs2015.jpg\" alt=\"TFS2012 to TFS2015\" width=\"660\" height=\"452\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2012-to-tfs2015.jpg 1149w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2012-to-tfs2015-300x205.jpg 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2012-to-tfs2015-768x526.jpg 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2016\/02\/tfs2012-to-tfs2015-1024x701.jpg 1024w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p class=\"gray\">\u00a0You can see <strong><a href=\"https:\/\/www.youtube.com\/watch?v=7C6LG6k4wcU&amp;t=4s\">this video<\/a><\/strong>, if you would like to find more information about my personal experience of the migration Team Foundation Server to Visual Studio Team Services using Database Import Service or TFS Migrator tool provided by Visual Studio Team. Going through all six phases of the migration, following the migration guide provided by Microsoft as a walkthrough. You will see how to get started with the migration process and which prerequisites should be completed.<\/p>\n<p class=\"gray\">The most important prerequisite is that you must have Azure Active Directory in order to use TFS Migrator tool. See more about the two different process models supported by VSTS, Inherited and Hosted XML. See which decisions you should make and how to validate them. For example which customizations you should keep and which one to remove. To prepare the first collection dacpac, first you should prepare Azure Storage Container, create dacpac file and afterwards upload it. To prepare the second collection Azure VM. You should install SQL Server, backup the DB from the collection and upload it to the Azure storage container. See first how to import (dry &#8211; run) and how to change the configuration afterwards in order to import (production).<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Introduction TFS Requirements and Compatibility Collection Size based on actual &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2016\/02\/21\/how-long-it-will-take-to-upgrade-to-tfs2015-with-update1\/\"> <span class=\"screen-reader-text\">How Long It Will Take to Upgrade to TFS2015 with Update 1<\/span> Read More<\/a><\/p>\n","protected":false},"author":1,"featured_media":5473,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[16,17,38,42,43,44,834],"tags":[843,839],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/5260"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=5260"}],"version-history":[{"count":6,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/5260\/revisions"}],"predecessor-version":[{"id":9535,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/5260\/revisions\/9535"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media\/5473"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=5260"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=5260"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=5260"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}