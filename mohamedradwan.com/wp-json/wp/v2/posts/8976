{"id":8976,"date":"2019-03-04T00:25:41","date_gmt":"2019-03-04T00:25:41","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=8976"},"modified":"2019-07-17T08:09:46","modified_gmt":"2019-07-17T08:09:46","slug":"building-and-deploying-your-code-with-azure-pipelines","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2019\/03\/04\/building-and-deploying-your-code-with-azure-pipelines\/","title":{"rendered":"Building and Deploying your Code with Azure Pipelines"},"content":{"rendered":"<p>&nbsp;<\/p>\n<h2><a name=\"_Toc500069570\"><\/a>Introduction<\/h2>\n<p>In this post, we are going to see more about the ultimate DevOps tool for creating your own CI\/CD pipelines for any language targeting any platform. It is Azure pipelines. Using this tool now, you can simply go from nothing at all to a new Azure pipeline project.<\/p>\n<h2><a name=\"_Toc500069571\"><\/a>Create Azure pipeline project<\/h2>\n<p>For example, let us say that your code is sitting somewhere, for example on GitHub, but you do not have an Azure DevOps account, but you want to create a CI CD pipeline. You just need to go to Azure Pipelines page and click on the button Start free with Pipelines (image 1).<\/p>\n<figure id=\"attachment_8977\" aria-describedby=\"caption-attachment-8977\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8977\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-1-Azure-pipelines.png\" alt=\"Image 1 - Azure pipelines\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-1-Azure-pipelines.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-1-Azure-pipelines-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-1-Azure-pipelines-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-1-Azure-pipelines-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8977\" class=\"wp-caption-text\">Image 1 &#8211; Azure pipelines<\/figcaption><\/figure>\n<p>&nbsp;<\/p>\n<h3 class=\"blue\"><span class=\"ion-tip\">Tip (<strong><a href=\"https:\/\/mohamedradwan.com\/2019\/05\/31\/docker-for-beginners-step-by-step-tutorial\/\">Docker for beginners<\/a>)<\/strong><\/span><\/h3>\n<p class=\"blue\">For more information about how to work with <strong>Docker<\/strong> like, pull docker image, run docker image and work with container,<\/p>\n<p>&nbsp;<\/p>\n<p>Just with one click, you will have created your own organization where all you have to do is to type your project name and click Create. Now you have an empty Azure pipeline project.<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8978\" aria-describedby=\"caption-attachment-8978\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8978\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-2-Azure-pipeline-empty-project.png\" alt=\"Image 2 - Azure pipeline empty project\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-2-Azure-pipeline-empty-project.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-2-Azure-pipeline-empty-project-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-2-Azure-pipeline-empty-project-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-2-Azure-pipeline-empty-project-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8978\" class=\"wp-caption-text\">Image 2 &#8211; Azure pipeline empty project<\/figcaption><\/figure>\n<h2><a name=\"_Toc500069572\"><\/a> Create your first pipeline<\/h2>\n<p>On the homepage of your new Azure pipeline project, click on the Pipelines link, then on the New pipeline. First thing you are going to see is the most important question, \u201cWhere is your code?\u201d (Image 3).<\/p>\n<figure id=\"attachment_8979\" aria-describedby=\"caption-attachment-8979\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8979\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-3-New-pipeline.png\" alt=\"Image 3 - New pipeline\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-3-New-pipeline.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-3-New-pipeline-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-3-New-pipeline-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-3-New-pipeline-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8979\" class=\"wp-caption-text\">Image 3 &#8211; New pipeline<\/figcaption><\/figure>\n<p>You have two options by default, GitHub and Azure Repos. TFS and BitBucket cloud, but for using them you need to go to our Visual Designer. In our example, our code is on GitHub so we are going to choose the first option. After that, you will need to authorize with GitHub. After authorizing, you will be able to see all your private and public repos, which are located in your GitHub account. Now you need to select your repo, which you are going to use. Next, the code and the technology used in your repo are going to be analyzed. Based on the results of the analysis, a couple of templates are going to be offered for use (Image 4).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8980\" aria-describedby=\"caption-attachment-8980\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8980\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-4-Choose-a-template-for-your-Pipeline.png\" alt=\"Image 4 - Choose a template for your Pipeline\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-4-Choose-a-template-for-your-Pipeline.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-4-Choose-a-template-for-your-Pipeline-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-4-Choose-a-template-for-your-Pipeline-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-4-Choose-a-template-for-your-Pipeline-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8980\" class=\"wp-caption-text\">Image 4 &#8211; Choose a template for your Pipeline<\/figcaption><\/figure>\n<p>&nbsp;<\/p>\n<p class=\"green\"><span class=\"ion-info\">Tip (<a href=\"https:\/\/mohamedradwan.com\/2019\/05\/31\/mastering-git-from-beginner-to-advanced-step-by-step-with-graphical-animation-commands\/\"><strong>Mastering Git with animation<\/strong>) <\/a><\/span> For more information about how to work with <strong>Git<\/strong> with animation. All commands will be represented in graphical animation. E.g. git branch, git merge, git rebase, git cherry-pick and many others, see <strong><a href=\"https:\/\/mohamedradwan.com\/2019\/05\/31\/mastering-git-from-beginner-to-advanced-step-by-step-with-graphical-animation-commands\/\"> Mastering Git with animation <\/a><\/strong><\/p>\n<p>&nbsp;<\/p>\n<h2><a name=\"_Toc500069573\"><\/a>Create and run a build<\/h2>\n<p>In my case, my application is asp.net and I am going to create a pipeline using yml file. You can also edit your yml file by adding your own additional tasks. After finishing with editing the yml file, you can save it and run by clicking on the Save and run button. Now an agent is going to be prepared for the job, the code is going to be downloaded from GitHub.<\/p>\n<p>Everything is going to be compiled using Visual Studio, the Unit test are going to be run. After a while, your build is going to be finished. If you go to the Summary tab, you can see a timeline of everything that happened during the build, including all the tests that were run (Image 5). Now let us release our code by just clicking on the Release button.<\/p>\n<figure id=\"attachment_8981\" aria-describedby=\"caption-attachment-8981\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8981\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-5-Build-summary-and-Release-button.png\" alt=\"Image 5 -Build summary and Release button\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-5-Build-summary-and-Release-button.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-5-Build-summary-and-Release-button-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-5-Build-summary-and-Release-button-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-5-Build-summary-and-Release-button-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8981\" class=\"wp-caption-text\">Image 5 -Build summary and Release button<\/figcaption><\/figure>\n<h2><a name=\"_Toc500069574\"><\/a>Release your code<\/h2>\n<p>The Release button will take us to the visual editor for the Release pipeline. I am going to use Azure App Service deployment template. Next thing we need to do is to define the Stages and the tasks that are going to run for each stage. Now I will connect my Azure pipelines account with my Azure subscription. Now I can also choose the app service that I am going to deploy to (in my case I am using Azure DevOps Launch). In addition, I am going to choose the option Deploy to slot, select my resource group and then choose my Staging slot.<\/p>\n<p>You can also customize your release pipelines by adding or removing tasks. You can use some of the offered tasks or if you cannot find what you want to use, you can always go to the Marketplace where you can find over 700 build and release tasks that you can just download and start using. In addition, you can create your custom tasks in PowerShell or node.js.<\/p>\n<p>After creating your stage, you have ability to add approvers before and after each stage. You can add pre and post deployment approvers (Image 6).<\/p>\n<figure id=\"attachment_8982\" aria-describedby=\"caption-attachment-8982\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8982\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-6-Add-post-deployment-approver.png\" alt=\"Image 6 - Add post deployment approver\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-6-Add-post-deployment-approver.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-6-Add-post-deployment-approver-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-6-Add-post-deployment-approver-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-6-Add-post-deployment-approver-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8982\" class=\"wp-caption-text\">Image 6 &#8211; Add post deployment approver<\/figcaption><\/figure>\n<p>After this, your stage is complete and you can create other stages based on your needs. In my case, I am going to clone my first stage in order to use it for Production, but for that purpose, I am going to remove the option to deploy to slot because I am just going to deploy the Production just on my app service. Next, I am going to create a Release just by clicking on the Release button (Image 7).<\/p>\n<p>&nbsp;<\/p>\n<figure id=\"attachment_8983\" aria-describedby=\"caption-attachment-8983\" style=\"width: 1372px\" class=\"wp-caption alignnone\"><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-8983\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-7-Create-a-Release.png\" alt=\"Image 7 - Create a Release\" width=\"1372\" height=\"774\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-7-Create-a-Release.png 1372w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-7-Create-a-Release-300x169.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-7-Create-a-Release-768x433.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2019\/03\/Image-7-Create-a-Release-1024x578.png 1024w\" sizes=\"(max-width: 1372px) 100vw, 1372px\" \/><figcaption id=\"caption-attachment-8983\" class=\"wp-caption-text\">Image 7 &#8211; Create a Release<\/figcaption><\/figure>\n<h2><a name=\"_Toc500069575\"><\/a> Conclusion<\/h2>\n<p>In this post we have shown how to go from nothing to a full CI CD pipeline for any language targeting any platform with your code from your own repository of choice, deploying to wherever you need it to be deployed (Azure, behind or in front of your firewall). If you have an open source project, you get all of this free, including 10 parallel pipelines out of the box. Go out and check your pipelines now by going to dev.azure.com<\/p>\n","protected":false},"excerpt":{"rendered":"<p>&nbsp; Introduction In this post, we are going to see &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2019\/03\/04\/building-and-deploying-your-code-with-azure-pipelines\/\"> <span class=\"screen-reader-text\">Building and Deploying your Code with Azure Pipelines<\/span> Read More<\/a><\/p>\n","protected":false},"author":1,"featured_media":9346,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[16,18],"tags":[99,960,963,112,971,972],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/8976"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=8976"}],"version-history":[{"count":5,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/8976\/revisions"}],"predecessor-version":[{"id":9563,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/8976\/revisions\/9563"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media\/9346"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=8976"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=8976"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=8976"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}