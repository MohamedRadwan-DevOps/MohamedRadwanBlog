{"id":4415,"date":"2014-04-05T23:50:46","date_gmt":"2014-04-05T23:50:46","guid":{"rendered":"https:\/\/mohamedradwan.com\/?p=4415"},"modified":"2016-04-25T07:51:27","modified_gmt":"2016-04-25T07:51:27","slug":"migrating-tfs-server-or-collection-to-another-domain","status":"publish","type":"post","link":"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/","title":{"rendered":"Migrating TFS Server or Collection to another domain"},"content":{"rendered":"<p>If you migrating a TFS Server or a Collection to another domain? You will need to be very careful about Service and User Accounts, you will need a well plan\u00a0for that, otherwise it will end up with a big mess.<\/p>\n<p><span style=\"color: #339966;\"><strong>Scenario 1, the same accounts with\u00a0different domain name:<\/strong><\/span><\/p>\n<p>[code language=&#8221;xml&#8221;]<br \/>\nTFSConfig Identities \/change \/fromdomain:Domain1 \/todomain:Domain2<br \/>\n[\/code]<\/p>\n<p><span style=\"color: #339966;\"><strong>Scenario 2, different\u00a0accounts with different domain name:<\/strong><\/span><\/p>\n<ul>\n<li>You will need to manually map one by one as the following:<\/li>\n<\/ul>\n<p>[code language=&#8221;xml&#8221;]<br \/>\nTFSConfig Identities \/change \/fromdomain:Domain1 \/todomain:Domain2 \/account:OldAccount \/toaccount:NewAccount<br \/>\n[\/code]<\/p>\n<p><span style=\"color: #339966;\"><strong>And the following is the command for mapping the service account for AT (Application Tire)<\/strong><\/span><\/p>\n<p>[code language=&#8221;xml&#8221;]<br \/>\nTFSConfig Accounts \/change \/AccountType:ApplicationTier \/account:AccountName \/password:Password<br \/>\n[\/code]<\/p>\n<p><span style=\"color: #339966;\"><strong><br \/>\nSo what are the steps to map my accounts:<br \/>\n<\/strong><\/span><\/p>\n<ul>\n<li>Create all the new accounts on the new domain and<span style=\"color: #ff0000;\"> DON&#8217;T ADD THEM TO TFS<\/span><\/li>\n<li>Open the command line as admin and navigate to &#8220;<em>C:Program FilesMicrosoft Team Foundation Server 12.0Tools<\/em>&#8220;<\/li>\n<li>Run the TFSConfig Identities with the right parameters<\/li>\n<li>Review the result<\/li>\n<li>Force synchronization for fasting the retrieving the result or wait the synchronization to happen after sometimes<\/li>\n<\/ul>\n<p><strong>Create all the new accounts on the new domain and<span style=\"color: #ff0000;\">\u00a0DON&#8217;T ADD THEM TO TFS<br \/>\n<a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/add-user-accounts-to-the-domain\/#main\" rel=\"attachment wp-att-4420\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4420\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/add-user-accounts-to-the-domain.png?w=660\" alt=\"Add user accounts to the domain\" width=\"660\" height=\"413\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/add-user-accounts-to-the-domain.png 725w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/add-user-accounts-to-the-domain-300x188.png 300w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><\/a><\/span><\/strong><\/p>\n<p><strong>Open the command line as admin and navigate to<\/strong> &#8220;<em>C:Program FilesMicrosoft Team Foundation Server 12.0Tools<\/em>&#8221;<\/p>\n<p><a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/navigate-to-tfs-tools\/#main\" rel=\"attachment wp-att-4424\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-4424\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/navigate-to-tfs-tools.png\" alt=\"Navigate to TFS Tools\" width=\"639\" height=\"246\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/navigate-to-tfs-tools.png 639w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/navigate-to-tfs-tools-300x115.png 300w\" sizes=\"(max-width: 639px) 100vw, 639px\" \/><\/a><\/p>\n<p><strong>Run the TFSConfig Identities with the right parameters<br \/>\n<a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/run-tfsconfig-with-parmeters\/#main\" rel=\"attachment wp-att-4425\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4425\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/run-tfsconfig-with-parmeters.png?w=660\" alt=\"Run TFSConfig with parmeters\" width=\"660\" height=\"55\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/run-tfsconfig-with-parmeters.png 833w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/run-tfsconfig-with-parmeters-300x25.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/run-tfsconfig-with-parmeters-768x65.png 768w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><br \/>\n<\/a><\/strong><strong>Review the result<br \/>\n<\/strong><strong><a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/map-to-a-user-exist-on-the-domain-but-not-added-to-tfs\/#main\" rel=\"attachment wp-att-4421\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4421\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-a-user-exist-on-the-domain-but-not-added-to-tfs.png?w=660\" alt=\"map to a user exist on the domain but not added to TFS\" width=\"660\" height=\"190\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-a-user-exist-on-the-domain-but-not-added-to-tfs.png 1294w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-a-user-exist-on-the-domain-but-not-added-to-tfs-300x86.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-a-user-exist-on-the-domain-but-not-added-to-tfs-768x221.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-a-user-exist-on-the-domain-but-not-added-to-tfs-1024x295.png 1024w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><br \/>\n<\/a><\/strong><strong>Force synchronization for fasting the retrieving the result or wait the synchronization to happen after sometimes<\/strong><\/p>\n<p>see the following post on how to do that:<br \/>\n<a title=\"Force Synchronizing TFS 2013 Users with Windows Accounts\" href=\"https:\/\/mohamedradwan.com\/2013\/12\/29\/force-synchronizing-tfs-2013-users-with-windows-accounts\/\" target=\"_blank\">Force Synchronizing TFS 2013 Users with Windows Accounts<\/a><\/p>\n<p><strong>What will happen if I mapped to an exiting user on the TFS?<\/strong><strong><a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/map-to-user-exist-on-the-domain-and-added-to-tfs\/#main\" rel=\"attachment wp-att-4422\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4422\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-exist-on-the-domain-and-added-to-tfs.png?w=660\" alt=\"map to user exist on the domain and added to TFS\" width=\"660\" height=\"170\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-exist-on-the-domain-and-added-to-tfs.png 1296w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-exist-on-the-domain-and-added-to-tfs-300x77.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-exist-on-the-domain-and-added-to-tfs-768x198.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-exist-on-the-domain-and-added-to-tfs-1024x264.png 1024w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><br \/>\n<\/a><\/strong><strong>What will happen if I mapped to account that is not existing?<\/strong><strong><a href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/map-to-user-that-is-not-exist-on-the-domain\/#main\" rel=\"attachment wp-att-4423\"><img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-large wp-image-4423\" src=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-that-is-not-exist-on-the-domain.png?w=660\" alt=\"Map to user that is not exist on the domain\" width=\"660\" height=\"165\" srcset=\"https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-that-is-not-exist-on-the-domain.png 1294w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-that-is-not-exist-on-the-domain-300x75.png 300w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-that-is-not-exist-on-the-domain-768x193.png 768w, https:\/\/mohamedradwan.com\/wp-content\/uploads\/2014\/03\/map-to-user-that-is-not-exist-on-the-domain-1024x257.png 1024w\" sizes=\"(max-width: 660px) 100vw, 660px\" \/><br \/>\n<\/a><\/strong>For more info see the following link:<br \/>\n<a title=\"Move Team Foundation Server from one environment to another\" href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/ms404883.aspx#MoveAccounts\" target=\"_blank\">Move Team Foundation Server from one environment to another<\/a><\/p>\n<p><a title=\"TFS Integration Tools \u2013 How do I map users between domains or systems? \" href=\"http:\/\/blogs.msdn.com\/b\/willy-peter_schaub\/archive\/2011\/02\/05\/tfs-integration-tools-how-do-i-map-users-between-domains-or-systems-q-amp-a-44.aspx?Redirected=true\" target=\"_blank\">TFS Integration Tools \u2013 How do I map users between domains or systems?\u00a0<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>If you migrating a TFS Server or a Collection to &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"ast-button\" href=\"https:\/\/mohamedradwan.com\/2014\/04\/05\/migrating-tfs-server-or-collection-to-another-domain\/\"> <span class=\"screen-reader-text\">Migrating TFS Server or Collection to another domain<\/span> Read More<\/a><\/p>\n","protected":false},"author":1,"featured_media":5541,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-global-header-display":"","ast-banner-title-visibility":"","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":"","footnotes":""},"categories":[16,17,38,47],"tags":[],"_links":{"self":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/4415"}],"collection":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/comments?post=4415"}],"version-history":[{"count":1,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/4415\/revisions"}],"predecessor-version":[{"id":5542,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/posts\/4415\/revisions\/5542"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media\/5541"}],"wp:attachment":[{"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/media?parent=4415"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/categories?post=4415"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mohamedradwan.com\/wp-json\/wp\/v2\/tags?post=4415"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}